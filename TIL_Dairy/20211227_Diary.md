### 今日の目標
- RSpecの基本を理解する(part3)
 
### 今日の積み上げ
-  モデルスペックのバリテーションをテスト
「テスト対象のコードでいろいろ試すアプローチ」として、
1. toをnot_toに変えてエクスペクテーションを反転させる。
2. バリテーションをコメントアウトする。
3. 数値しか受け付けない属性なら文字列を渡し、４文字から８文字の文字列を要求するバリテーションなら3文字と９文字の文字列を渡す。
もしテストの出力結果に何も変化がなければ、**テストがアプリケーション側のコードと連携していなかったり、コードが期待した動きと個なっていること**を意味する。また、テストを書いている最中にモデルが持つべきバリテーションについて考えれば、バリテーションの追加を忘れにくくなる。

- クラスメソッドをテスト
```
scope :search, ->(term) {
  where("LOWER(message) LIKE ?", "%#{term.downcase}%")
}
```
1. 正常系のテストをする。
2. 失敗をテストする。

- スペックをDRYに保つ
以下のようにexampleのアウトラインを作るとexampleをひとまとめにして分類できる。こうすると読みやすくなる。
```
require 'rails_helper'
 
RSpec.describe Note, type: :model do
 
  # 他のスペックが並ぶ

  # 文字列に一致するメッセージを検索する
  describe "search message for a term" do
 
    # 一致するデータが見つかるとき
    context "when a match is found" do
      # 一致する場合のexampleが並ぶ ...
    end

     # 一致するデータが1件も見つからないとき
    context "when no match is found" do

     # 一致しない場合のexampleが並ぶ ...
    end
  end
end
```

### 参考
Everyday Rails - RSpecによるRailsテスト入門

### 反省
スペックを書くときはアウトラインを作ることで整理される。スペック以外にもコードを書くときはアウトラインを書くことを意識しようと思う。